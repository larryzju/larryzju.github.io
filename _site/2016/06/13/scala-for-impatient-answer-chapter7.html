<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"> <![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"> <![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>larryzju 的博客 - 《快学scala》 题解（第7章）</title>
  <meta name="author" content="larryzju 的博客" />
  <meta name="description" content="The blog of larryzju 的博客" />
  <link rel="canonical" href="http://localhost:4000/2016/06/13/scala-for-impatient-answer-chapter7.html" />

  <link href="//fonts.googleapis.com/css?family=Open+Sans:600,800" rel="stylesheet" type="text/css">
  <link rel="shortcut icon" href="/favicon.png">
  <link rel="alternate" type="application/atom+xml" title="larryzju 的博客" href="http://localhost:4000/atom.xml" />

  <link rel="stylesheet" href="/assets/css/all.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha256-k2/8zcNbxVIh5mnQ52A0r3a6jAgMGxFJFE2707UxGCk= sha512-ZV9KawG2Legkwp3nAlxLIVFudTauWuBpC10uEafMHYL0Sarrz5A7G79kXh5+5+woxQ5HM559XX2UZjMJ36Wplg==" crossorigin="anonymous">
</head>
<body>
  <div class="container">
    <div class="four columns sidebar">
      <nav>
  <a href="/">
    
    <img class='width: 100px' src="/logo.png" id="logo" alt="Blog logo"/>
    
  </a>

  <h2><a href="/">larryzju 的博客</a></h2>

  <div id="links">
    <h3>Links</h3>
<ul>
  <li><a href="https://larryzju.github.io/diary/index.html">笔记 (gitpage)</a></li>
  <li><a href="https://github.com/larryzju/diary">笔记源码</a></li>
</ul>

  </div>

  <div id="tags">
    <h3>Tags</h3>


<ul>
  
  <li>
    <a href="/tag/快学scala题解.html" rel="tag">
      <span class="tag-id">快学scala题解</span>
      <span class="tag-count">7</span>
    </a>
  </li>
  
  <li>
    <a href="/tag/杂记.html" rel="tag">
      <span class="tag-id">杂记</span>
      <span class="tag-count">11</span>
    </a>
  </li>
  
  <li>
    <a href="/tag/计算机.html" rel="tag">
      <span class="tag-id">计算机</span>
      <span class="tag-count">15</span>
    </a>
  </li>
  
</ul>

  </div>

  <div id="social">
    Follow me:
<div id="stalker">
  
  <a title="larryzju on Github" href="https://github.com/larryzju">
    <i class="fa fa-github-square"></i>
  </a>
  

  

  

  

  

  

  

  

  

  

  

  
  <a title="Atom feed" id="atom" href="/atom.xml">
    <i class="fa fa-rss-square"></i>
  </a>
  
</div>

  </div>

</nav>

    </div>

    <div class="eleven columns content">
      <p class="meta">
  June 13, 2016
  <a href="/">
    <i class="home fa fa-home"></i>
  </a>
</p>

<h1 class="title">《快学scala》 题解（第7章）</h1>

<div id="post">
  <ol>
  <li>
    <p>两者的不同之处在于可见性的不同，例如第一种导入方式下 <code>Constant</code> 不可见</p>

    <pre><code class="language-scala">package com {
  package horstmann {
    object Constant {
      val pi = 3.1415926
    }
  }
}


package com.horstmann.impatient {
  package test {
    object Test extends App {
      println( Constant.pi )
    }
  }
}
</code></pre>

    <p>而第二种方式则是可见的</p>

    <pre><code class="language-scala">package com {
  package horstmann {
    object Constant {
      val pi = 3.1415926
    }
  }
}


package com {
  package horstmann {
    package impatient {
      package test {
        object Test extends App {
          println( Constant.pi )
        }
      }
    }
  }
}
</code></pre>
  </li>
  <li>
    <p>例如在代码中写入下面的代码，可能导致 hadoop 文件系统不可用</p>

    <pre><code class="language-scala">package com {
  package apache.hadoop.fs {
    class FileSystem {
    }
  }
}
</code></pre>
  </li>
  <li>
    <p>包 random 代码如下</p>

    <pre><code class="language-scala">package object random {

  private val a = 1664525
  private val b = 1013904223
  private val n = 32
  private var seed: Int = 0

  private def next() {
    seed = ((1L * seed * a + b) % ( 1L &lt;&lt; n )).toInt
  }

  def nextInt(): Int = {
    next()
    seed
  }

  def nextDouble(): Double = {
    next()
    1.0 * seed / (1L&lt;&lt;n)
  }

  def setSeed( seed: Int ): Unit = {
    this.seed = seed
  }
}
</code></pre>
  </li>
  <li>
    <p>提供 <code>package object</code> 语法可能是为了约束函数和变量定义，防止在顶级定义裸变量</p>
  </li>
  <li>
    <p><code>private[com] def giveRaise(rate:Double)</code> 约束定义只能在 <code>com</code> 包内部可见</p>
  </li>
  <li>
    <p>代码如下</p>

    <pre><code class="language-scala">import java.util.{HashMap =&gt; JavaHashMap}
import scala.collection.mutable.{HashMap =&gt; ScalaHashMap}

object Chapter7 extends App {
  val jh = new JavaHashMap[String,String]( System.getenv )
  val sh = new ScalaHashMap[String,String]()
  for ( e &lt;- jh.entrySet.toArray ) {
    val a = e.asInstanceOf[java.util.Map.Entry[String,String]]
    sh(a.getKey) = a.getValue
  }
  println( sh )
}
</code></pre>
  </li>
  <li>
    <p>修改后的代码如下</p>

    <pre><code class="language-scala">object Chapter7 extends App {

  {
    import java.util.{HashMap =&gt; JavaHashMap}
    import scala.collection.mutable.{HashMap =&gt; ScalaHashMap}

    val jh = new JavaHashMap[String,String]( System.getenv )
    val sh = new ScalaHashMap[String,String]()
    for ( e &lt;- jh.entrySet.toArray ) {
      val a = e.asInstanceOf[java.util.Map.Entry[String,String]]
      sh(a.getKey) = a.getValue
    }
    println( sh )
  }

}
</code></pre>
  </li>
  <li>
    <p>将会把 <code>java</code> 和 <code>javax</code> 下所有的包内容都导入到当前包中，不是个好作法。因为 scala 中默认导入了 <code>scala._</code> 的所有内容，这样导入会覆盖 scala 默认导入的包，如 <code>scala.xml</code> 被 <code>javax.xml</code> 替换，导致可能的程序异常。</p>
  </li>
  <li>
    <p>代码如下</p>

    <pre><code class="language-scala">import java.lang.System._

object Chapter7 extends App {

  val user = getProperty( "user.name" )
  if ( readLine() == "secret" ) {
    printf( "hello %s\n", user )
  } else {
    printf( "invalid password\n" )
  }

}
</code></pre>
  </li>
  <li>
    <p>被覆盖的如 Boolean, Byte, Double, Enum, Float, Long 等。</p>

    <blockquote>
      <p>Java ClassLoader 由于动态特性，不能确定 JVM 中的 Class 情况，而是在收到有关类的请求后返回一个类或抛出异常，因此用默认的 ClassLoader 无法确切解决上面的问题。</p>

      <p>需要通过自定义 ClassLoader 来解决上述问题，待完成 :flags:</p>
    </blockquote>
  </li>
</ol>


</div>

<div id="related">
  <h3>Related Posts</h3>
  <ul class="posts">
    
    <li>
      <span>28 Jun 2017 &raquo;</span> <a href="/2017/06/28/grub2-windows.html">windows 安装小记</a>
    </li>
    
    <li>
      <span>21 Jun 2017 &raquo;</span> <a href="/2017/06/21/%E6%96%B0%E4%B8%9C%E6%96%B9%E5%BF%AB%E8%BD%A6%E8%B0%8B%E6%9D%80%E6%A1%88.html">《新东方快车谋杀案》观后记</a>
    </li>
    
    <li>
      <span>17 Jun 2017 &raquo;</span> <a href="/2017/06/17/%E6%81%B0%E5%90%8C%E5%AD%A6%E5%B0%91%E5%B9%B4.html">《恰同学少年》读后记</a>
    </li>
    
  </ul>

  <h3>Tags :</h3>
  <span>
    
      <a href="/tag/快学scala题解.html" rel="tag"> 
         快学scala题解 
        
          ,
        
      </a>

      <a href="/tag/计算机.html" rel="tag"> 
         计算机 
        
        .
        
      </a>

  </span>
</div>



      <div class="footer">
        <div class="disclaimer">
  
  <p>
  唯学无际，际于天地
  </p>
  

  <p>
    © larryzju 的博客, 2017 &mdash; built with <a href="http://jekyllrb.com/">Jekyll</a> using <a href="https://github.com/swanson/lagom">Lagom theme</a>
  </p>
</div>

      </div>
    </div>
  </div>


</body>
</html>
